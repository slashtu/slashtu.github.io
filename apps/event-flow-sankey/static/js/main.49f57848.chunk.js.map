{"version":3,"sources":["logo.svg","chart.js","sankey.js","TimelineChart.js","App.js","reportWebVitals.js","index.js"],"names":["highlight","id","type","d3","style","append","attr","svg","links","path","selectAll","data","enter","d","console","log","mechanism","sort","a","b","dy","nodes","x","y","on","event","node","linkType","nodeType","forEach","step","depth","nextNodes","length","shift","link","push","status","dx","text","name","Sankey","sankey","nodeWidth","nodeHeight","nodePadding","roundHeight","size","computeLinkDepths","ascendingSourceDepth","source","ascendingTargetDepth","target","sourceLinks","targetLinks","sx","tx","dxSource","dxTarget","value","debug","_","arguments","i","layout","iterations","remainingNodes","round","computeNodeBreadths","nodesNest","reduce","o","n","key","Math","floor","nodesByBreadth","Object","values","initializeNodeDepth","computeNodeDepths","group","relayout","curvature","x0","x1","y0","y1","xi","TimelineChartStyled","styled","div","SVGContainer","TimelineChart","config","useEffect","d3Sankey","chart","times","label","DiagramStyled","Times","RoundEndTime","p","index","Day","span","Time","Chart","App","map","t","split","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"0OAAe,I,aCETA,EAAY,SAACC,EAAYC,GAChB,SAATA,GACFC,IAAA,WAAcF,IAAMG,MAAM,OAAQ,WAGvB,SAATF,GACFC,IAAA,WAAcF,IAAMG,MAAM,iBAAkB,IAIjC,EACF,WAOT,OANYD,IACF,eACPE,OAAO,OACPC,KAAK,QAAS,KACdA,KAAK,SAAU,MANP,EAWH,SAACC,EAAUC,EAAYC,GAC/B,OAAOF,EACJF,OAAO,KACPK,UAAU,SACVC,KAAKH,GACLI,QACAP,OAAO,QACPC,KAAK,SAAS,SAAUO,GACvB,MAAO,UAERP,KAAK,IAAKG,GACVH,KAAK,MAAM,SAAUO,GACpB,OAAOA,EAAEZ,MAEVG,MAAM,gBAAgB,SAAUS,GAE/B,OAAO,KAERT,MAAM,UAAU,SAAUS,GAEzB,OADAC,QAAQC,MACY,cAAhBF,EAAEG,UACG,UAGW,gBAAhBH,EAAEG,UACG,eADT,KAIDC,MAAK,SAAUC,EAAQC,GACtB,OAAOA,EAAEC,GAAKF,EAAEE,OAxCT,EA4CH,SAACb,EAAUc,GACnB,OAAOd,EACJF,OAAO,KACPC,KAAK,QAAS,SACdI,YACAC,KAAKU,GACLT,QACAP,OAAO,KACPC,KAAK,QAAS,QACdA,KAAK,aAAa,SAAUO,GAC3B,MAAO,aAAeA,EAAES,EAAI,IAAMT,EAAEU,EAAI,OAEzCC,GAAG,aAAa,SAAUC,EAAYC,GAqBrC1B,EAAU0B,EAAKzB,GAAI,QAXJ,CACb,CACE0B,SAAU,cACVC,SAAU,UAEZ,CACED,SAAU,cACVC,SAAU,WAMLC,SAAQ,SAACC,GAIhB,IAHA,IAAIC,EAAQ,EACNC,EAAmB,CAACN,GAEnBM,EAAUC,OAAS,GAAKF,EAAQ,GAAG,CAC3BC,EAAUE,QAElBJ,EAAKH,UAAUE,SAAQ,SAAUM,GACpCH,EAAUI,KAAKD,EAAKL,EAAKF,WACzB5B,EAAUmC,EAAKL,EAAKF,UAAU3B,GAAI,QAClCD,EAAUmC,EAAKlC,GAAI,WAGrB8B,WAILP,GAAG,YAAY,WAEdrB,IAAa,SAASC,MAAM,iBAAkB,IAC9CD,IAAa,SACVC,MAAM,UAAW,IACjBA,MAAM,QAAQ,SAAUS,GACvB,MAAiB,UAAbA,EAAEwB,OAA2B,MACrB,iBAvGT,EA4GJ,SAACX,GACR,OAAOA,EACJrB,OAAO,QACPC,KAAK,MAAM,SAAUO,GACpB,OAAOA,EAAEZ,MAEVK,KAAK,QAAS,QACdA,KAAK,UAAU,SAAUO,GACxB,OAAOA,EAAEO,MAEVd,KAAK,SAAS,SAAUO,GACvB,OAAOA,EAAEyB,MAEVlC,MAAM,QAAQ,SAAUS,GACvB,MAAiB,UAAbA,EAAEwB,OAA2B,MACrB,aAEbjC,MAAM,UAAW,IACjBA,MAAM,UAAU,SAAUS,GACzB,MAAO,aAERR,OAAO,SACPkC,MAAK,SAAU1B,GACd,OAAOA,EAAE2B,SAnIF,EAuIA,SAACd,GACZ,OAAOA,EACJrB,OAAO,QACPD,MAAM,OAAQ,WACdE,KAAK,IAAK,IACVA,KAAK,cAAe,SACpBA,KAAK,KAAK,SAAUO,GACnB,OAAOA,EAAEO,GAAK,KAEfd,KAAK,KAAM,SACXA,KAAK,YAAa,MAClBiC,MAAK,SAAU1B,GACd,OAAOA,EAAE2B,S,QCyEFC,EAtOA,WACb,IAAIC,EAAS,GACTC,EAAY,GACZC,EAAa,GACbC,EAAc,GACdC,EAAc,IACdC,EAAO,CAAC,EAAG,GACX1B,EAAQ,GACRb,EAAQ,GAwLZ,SAASwC,IAsBP,SAASC,EAAqB/B,EAAGC,GAC/B,OAAOD,EAAEgC,OAAO3B,EAAIJ,EAAE+B,OAAO3B,EAG/B,SAAS4B,EAAqBjC,EAAGC,GAC/B,OAAOD,EAAEkC,OAAO7B,EAAIJ,EAAEiC,OAAO7B,EA1B/BF,EAAMQ,SAAQ,SAAUH,GACtBA,EAAK2B,YAAYpC,KAAKkC,GACtBzB,EAAK4B,YAAYrC,KAAKgC,MAExB5B,EAAMQ,SAAQ,SAAUH,GACtB,IAAI6B,EAAK,EACLC,EAAK,EAELC,EAAWd,GAAajB,EAAK2B,YAAYpB,OAAS,GAClDyB,EAAWf,GAAajB,EAAK4B,YAAYrB,OAAS,GAEtDP,EAAK2B,YAAYxB,SAAQ,SAAUM,GACjCoB,GAAME,EACNtB,EAAKoB,GAAKA,KAEZ7B,EAAK4B,YAAYzB,SAAQ,SAAUM,GACjCqB,GAAME,EACNvB,EAAKqB,GAAKA,QAahB,SAASG,EAAMxB,GACb,OAAOA,EAAKwB,MAGd,OAzNAjB,EAAOkB,MAAQ,WACb9C,QAAQC,IAAI,SACZD,QAAQC,IAAIM,IAGdqB,EAAOC,UAAY,SAAUkB,GAC3B,OAAKC,UAAU7B,QACfU,GAAakB,EACNnB,GAFuBC,GAKhCD,EAAOE,WAAa,SAAUiB,GAC5B,OAAKC,UAAU7B,QACfW,GAAciB,EACPnB,GAFuBE,GAKhCF,EAAOI,YAAc,SAAUe,GAC7B,OAAKC,UAAU7B,OACfa,GAAee,EADef,GAKhCJ,EAAOG,YAAc,SAAUgB,GAC7B,OAAKC,UAAU7B,QACfY,GAAegB,EACRnB,GAFuBG,GAKhCH,EAAOrB,MAAQ,SAAUV,GACvB,OAAKmD,UAAU7B,SACfZ,EAAQV,GACFkB,SAAQ,SAACH,EAAMqC,GACnBrC,EAAKzB,GAAL,eAAkB8D,GAClBrC,EAAKxB,KAAO,UAEPwC,GANuBrB,GAShCqB,EAAOlC,MAAQ,SAAUG,GACvB,OAAKmD,UAAU7B,SACfzB,EAAQG,GACFkB,SAAQ,SAACM,EAAM4B,GACnB5B,EAAKlC,GAAL,eAAkB8D,GAClB5B,EAAKjC,KAAO,UAEPwC,GANuBlC,GAShCkC,EAAOK,KAAO,SAAUc,GACtB,OAAKC,UAAU7B,QACfc,EAAOc,EACAnB,GAFuBK,GAKhCL,EAAOsB,OAAS,SAAUC,GAOxB,OA0DA5C,EAAMQ,SAAQ,SAAUH,GACtBA,EAAK2B,YAAc,GACnB3B,EAAK4B,YAAc,MAErB9C,EAAMqB,SAAQ,SAAUM,GACtB,IAAIe,EAASf,EAAKe,OAChBE,EAASjB,EAAKiB,OACM,kBAAXF,IAAqBA,EAASf,EAAKe,OAAS7B,EAAMc,EAAKe,SAC5C,kBAAXE,IAAqBA,EAASjB,EAAKiB,OAAS/B,EAAMc,EAAKiB,SAClEF,EAAOG,YAAYjB,KAAKD,GACxBiB,EAAOE,YAAYlB,KAAKD,MAQ5B,WACE,IACIH,EADAkC,EAAiB7C,EAGrB,KAAO6C,EAAejC,QACpBD,EAAY,GACZkC,EAAerC,SAAQ,SAAUH,GAC/BA,EAAKH,GAAKG,EAAKyC,MAAQ,GAAKrB,EAC5BpB,EAAKN,GAAKwB,EACVlB,EAAK2B,YAAYxB,SAAQ,SAAUM,GACjCH,EAAUI,KAAKD,EAAKiB,cAGxBc,EAAiBlC,EA9FnBoC,GAkGF,SAA2BH,GACzB,IAAMI,EAAYhD,EAAMiD,QAAO,SAACC,EAAGC,GACjC,IAAMC,EAAMC,KAAKC,MAAMH,EAAEjD,GAEzB,OADAgD,EAAEE,GAAF,sBAAcF,EAAEE,IAAQ,IAAxB,CAA6BD,IACtBD,IACN,IAEGK,EAAiBC,OAAOC,OAAOT,GAGrC,SAASU,IACE5E,IAAOyE,GAAgB,SAAUvD,GACxC,OACG0B,EAAK,IAAM1B,EAAMY,OAAS,GAAKY,GAAe1C,IAAOkB,EAAOsC,MAIjEiB,EAAe/C,SAAQ,SAAUR,GAC/BA,EAAMQ,SAAQ,SAAUH,EAAMqC,GAC5BrC,EAAKJ,EAAIyC,EAAIpB,GAAmB,IAANoB,EAAU,EAAIlB,GAExCnB,EAAKY,GAAKK,QAbhBoC,IAzGAC,GACAhC,IAqDA3B,EAAMQ,SAAQ,SAAUH,GACH,OAAfA,EAAKuD,QAAgBvD,EAAKH,GAAK,OAnD9BmB,GAGTA,EAAOwC,SAAW,WAEhB,OADAlC,IACON,GAGTA,EAAOP,KAAO,WACZ,IAAIgD,EAAY,GAEhB,SAAShD,EAAKtB,GACZ,IAAIuE,EAAKvE,EAAEqC,OAAO5B,GAAKT,EAAE0C,IAAM,GAC7B8B,EAAKxE,EAAEuC,OAAO9B,GAAKT,EAAE2C,IAAM,GAC3B8B,EAAKzE,EAAEqC,OAAO3B,EAAIV,EAAEqC,OAAO9B,GAC3BmE,EAAK1E,EAAEuC,OAAO7B,EACdiE,EAAKrF,IAAqBmF,EAAIC,GAIhC,MACE,IACAH,EACA,IACAE,EACA,IACAF,EACA,IAVKI,EAAGL,GAYR,IACAE,EACA,IAbKG,EAAG,EAAIL,GAeZ,IACAE,EACA,IACAE,EAUJ,OANApD,EAAKgD,UAAY,SAAUtB,GACzB,OAAKC,UAAU7B,QACfkD,GAAatB,EACN1B,GAFuBgD,GAKzBhD,GA6GFO,G,OCxLH+C,EAAsBC,IAAOC,IAAV,0BAEnBC,EAAeF,IAAOC,IAAV,mHAQHE,EA7CwB,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OA0BxC,OAzBAC,qBAAU,WACR,IAAMrD,EAASsD,IACZrD,UAAU,KACVC,WAAW,IACXC,YAAY,IACZE,KAAK,CAAC,IAAK,OAEVtC,EAAOiC,EAAOP,OAEVd,EAAiDyE,EAAjDzE,MAAOb,EAA0CsF,EAA1CtF,MAEfkC,EAAOrB,MAAMA,GAAOb,MAAMA,GAAOwD,OAAO,IAExClD,QAAQC,IAAI,QAASM,GACrBP,QAAQC,IAAI,QAASP,GAErB,IAAMD,EAAM0F,IAIRvE,GAFOuE,EAAe1F,EAAKC,EAAOC,GAE3BwF,EAAe1F,EAAKc,IAE/B4E,EAAcvE,GACduE,EAAkBvE,KACjB,CAACoE,IACAA,EAAOzE,MAAMY,OAAS,EAAU,KAGlC,cAACwD,EAAD,UACE,cAACG,EAAD,CAAc3F,GAAG,kBClCnB6F,EAAS,CACXzE,MAAO,CACL,CAAEmB,KAAM,2BAAkB2B,MAAO,GACjC,CAAE3B,KAAM,8BAA+B2B,MAAO,GAE9C,CAAE3B,KAAM,4BAAmB2B,MAAO,GAClC,CAAE3B,KAAM,8CAAsB2B,MAAO,GAErC,CAAE3B,KAAM,6BAAoB2B,MAAO,GACnC,CAAE3B,KAAM,qDAAwB2B,MAAO,GAEvC,CAAE3B,KAAM,4BAAmB2B,MAAO,GAClC,CAAE3B,KAAM,yBAA0B2B,MAAO,GACzC,CAAE3B,KAAM,0BAA2B2B,MAAO,GAC1C,CAAE3B,KAAM,2BAA4B2B,MAAO,GAC3C,CAAE3B,KAAM,gCAAa2B,MAAO,GAC5B,CAAE3B,KAAM,iCAAkC2B,MAAO,GACjD,CAAE3B,KAAM,wEAA4B2B,MAAO,IAE7C3D,MAAO,CACL,CAAE0C,OAAQ,EAAGE,OAAQ,EAAGpC,UAAW,aACnC,CAAEkC,OAAQ,EAAGE,OAAQ,EAAGpC,UAAW,aACnC,CAAEkC,OAAQ,EAAGE,OAAQ,EAAGpC,UAAW,aACnC,CAAEkC,OAAQ,EAAGE,OAAQ,EAAGpC,UAAW,aACnC,CAAEkC,OAAQ,EAAGE,OAAQ,EAAGpC,UAAW,eACnC,CAAEkC,OAAQ,EAAGE,OAAQ,EAAGpC,UAAW,aACnC,CAAEkC,OAAQ,EAAGE,OAAQ,GAAIpC,UAAW,aACpC,CAAEkC,OAAQ,EAAGE,OAAQ,EAAGpC,UAAW,aACnC,CAAEkC,OAAQ,EAAGE,OAAQ,GAAIpC,UAAW,aACpC,CAAEkC,OAAQ,EAAGE,OAAQ,GAAIpC,UAAW,aACpC,CAAEkC,OAAQ,GAAIE,OAAQ,GAAIpC,UAAW,cAEvCkF,MAAO,CACL,CACEC,MAAO,uBAET,CACEA,MAAO,uBAET,CACEA,MAAO,uBAET,CACEA,MAAO,wBAET,CACEA,MAAO,uBAET,CACEA,MAAO,uBAET,CACEA,MAAO,wBAET,CACEA,MAAO,uBAET,CACEA,MAAO,yBAyBb,IAAMC,EAAgBV,IAAOC,IAAV,mGAMbU,EAAQX,IAAOC,IAAV,gEAKLW,EAAeZ,IAAOC,IAAV,gJAKH,SAACY,GAAD,6BAAuB,GAAKA,EAAEC,MAA9B,UAGTC,EAAMf,IAAOgB,KAAV,0BAEHC,EAAOjB,IAAOgB,KAAV,qEAKJE,EAAQlB,IAAOC,IAAV,0BAEIkB,EAhDf,WACE,OACE,eAACT,EAAD,WACE,cAACC,EAAD,UACGP,EAAOI,MAAMY,KAAI,SAACC,EAAGhD,GACpB,OACE,eAACuC,EAAD,CAA4BE,MAAOzC,EAAnC,UACE,cAAC0C,EAAD,UAAMM,EAAEZ,MAAMa,MAAM,KAAK,KACzB,cAACL,EAAD,UAAOI,EAAEZ,MAAMa,MAAM,KAAK,OAFTD,EAAEZ,YAO3B,cAACS,EAAD,UACE,cAAC,EAAD,CAAed,OAAQA,UCvEhBmB,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.49f57848.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import * as d3 from 'd3';\n\nconst highlight = (id: string, type: string) => {\n  if (type === 'node') {\n    d3.select(`#${id}`).style('fill', '#c7b546');\n  }\n\n  if (type === 'link') {\n    d3.select(`#${id}`).style('stroke-opacity', 1);\n  }\n};\n\nexport default {\n  createSVG: () => {\n    const svg = d3\n      .select('#my_dataviz')\n      .append('svg')\n      .attr('width', 800)\n      .attr('height', 2000);\n\n    return svg;\n  },\n\n  addLinks: (svg: any, links: any, path: any) => {\n    return svg\n      .append('g')\n      .selectAll('.link')\n      .data(links)\n      .enter()\n      .append('path')\n      .attr('class', function (d: any) {\n        return 'link';\n      })\n      .attr('d', path)\n      .attr('id', function (d: any) {\n        return d.id;\n      })\n      .style('stroke-width', function (d: any) {\n        // return Math.max(1, d.dy);\n        return 3;\n      })\n      .style('stroke', function (d: any) {\n        console.log();\n        if (d.mechanism === 'lockBonus') {\n          return '#ff8438';\n        }\n\n        if (d.mechanism === 'inheritance') {\n          return '#54ff60';\n        }\n      })\n      .sort(function (a: any, b: any) {\n        return b.dy - a.dy;\n      });\n  },\n\n  addNodes: (svg: any, nodes: any) => {\n    return svg\n      .append('g')\n      .attr('class', 'nodes')\n      .selectAll()\n      .data(nodes)\n      .enter()\n      .append('g')\n      .attr('class', 'node')\n      .attr('transform', function (d: any) {\n        return 'translate(' + d.x + ',' + d.y + ')';\n      })\n      .on('mouseover', function (event: any, node: any) {\n        let stroke_opacity = 0;\n        // if (d3.select(this).attr('data-clicked') == '1') {\n        //   d3.select(this).attr('data-clicked', '0');\n        //   stroke_opacity = 0.2;\n        // } else {\n        //   d3.select(this).attr('data-clicked', '1');\n        //   stroke_opacity = 0.5;\n        // }\n\n        let traverse = [\n          {\n            linkType: 'sourceLinks',\n            nodeType: 'target',\n          },\n          {\n            linkType: 'targetLinks',\n            nodeType: 'source',\n          },\n        ];\n\n        highlight(node.id, 'node');\n\n        traverse.forEach((step) => {\n          let depth = 1;\n          const nextNodes: any[] = [node];\n\n          while (nextNodes.length > 0 && depth > 0) {\n            const node = nextNodes.shift();\n\n            node[step.linkType].forEach(function (link: any) {\n              nextNodes.push(link[step.nodeType]);\n              highlight(link[step.nodeType].id, 'node');\n              highlight(link.id, 'link');\n            });\n\n            depth--;\n          }\n        });\n      })\n      .on('mouseout', () => {\n        // reset color\n        d3.selectAll('.link').style('stroke-opacity', 0.3);\n        d3.selectAll('.rect')\n          .style('opacity', 0.3)\n          .style('fill', function (d: any) {\n            if (d.status === 'error') return 'red';\n            else return '#4083ac';\n          });\n      });\n  },\n\n  addRect: (node: any) => {\n    return node\n      .append('rect')\n      .attr('id', function (d: any) {\n        return d.id;\n      })\n      .attr('class', 'rect')\n      .attr('height', function (d: any) {\n        return d.dy;\n      })\n      .attr('width', function (d: any) {\n        return d.dx;\n      })\n      .style('fill', function (d: any) {\n        if (d.status === 'error') return 'red';\n        else return '#4083ac';\n      })\n      .style('opacity', 0.3)\n      .style('stroke', function (d: any) {\n        return '#6ebeff';\n      })\n      .append('title')\n      .text(function (d: any) {\n        return d.name;\n      });\n  },\n\n  addNodeText: (node: any) => {\n    return node\n      .append('text')\n      .style('fill', '#c9c9ce')\n      .attr('x', 10)\n      .attr('text-anchor', 'start')\n      .attr('y', function (d: any) {\n        return d.dy / 2;\n      })\n      .attr('dy', '.35em')\n      .attr('transform', null)\n      .text(function (d: any) {\n        return d.name;\n      });\n  },\n};\n","import * as d3 from 'd3';\n\nconst Sankey = function () {\n  let sankey = {};\n  let nodeWidth = 24;\n  let nodeHeight = 30;\n  let nodePadding = 30;\n  let roundHeight = 100;\n  let size = [1, 1];\n  let nodes = [];\n  let links = [];\n\n  sankey.debug = function () {\n    console.log('debug');\n    console.log(nodes);\n  };\n\n  sankey.nodeWidth = function (_) {\n    if (!arguments.length) return nodeWidth;\n    nodeWidth = +_;\n    return sankey;\n  };\n\n  sankey.nodeHeight = function (_) {\n    if (!arguments.length) return nodeHeight;\n    nodeHeight = +_;\n    return sankey;\n  };\n\n  sankey.roundHeight = function (_) {\n    if (!arguments.length) return roundHeight;\n    roundHeight = +_;\n    return roundHeight;\n  };\n\n  sankey.nodePadding = function (_) {\n    if (!arguments.length) return nodePadding;\n    nodePadding = +_;\n    return sankey;\n  };\n\n  sankey.nodes = function (data) {\n    if (!arguments.length) return nodes;\n    nodes = data;\n    nodes.forEach((node, i) => {\n      node.id = `node-${i}`;\n      node.type = 'node';\n    });\n    return sankey;\n  };\n\n  sankey.links = function (data) {\n    if (!arguments.length) return links;\n    links = data;\n    links.forEach((link, i) => {\n      link.id = `link-${i}`;\n      link.type = 'link';\n    });\n    return sankey;\n  };\n\n  sankey.size = function (_) {\n    if (!arguments.length) return size;\n    size = _;\n    return sankey;\n  };\n\n  sankey.layout = function (iterations) {\n    computeNodeLinks();\n    computeNodeBreadths();\n    computeNodeDepths(iterations);\n    computeLinkDepths();\n    computeNodeGroup();\n\n    return sankey;\n  };\n\n  sankey.relayout = function () {\n    computeLinkDepths();\n    return sankey;\n  };\n\n  sankey.link = function () {\n    var curvature = 0.3;\n\n    function link(d) {\n      var x0 = d.source.x + (d.sx || 0),\n        x1 = d.target.x + (d.tx || 0),\n        y0 = d.source.y + d.source.dy,\n        y1 = d.target.y,\n        xi = d3.interpolateNumber(y0, y1),\n        x2 = xi(curvature),\n        x3 = xi(1 - curvature);\n\n      return (\n        'M' +\n        x0 +\n        ',' +\n        y0 +\n        'C' +\n        x0 +\n        ',' +\n        x2 +\n        ' ' +\n        x1 +\n        ',' +\n        x3 +\n        ' ' +\n        x1 +\n        ',' +\n        y1\n      );\n    }\n\n    link.curvature = function (_) {\n      if (!arguments.length) return curvature;\n      curvature = +_;\n      return link;\n    };\n\n    return link;\n  };\n\n  function computeNodeGroup() {\n    nodes.forEach(function (node) {\n      if (node.group === 'G2') node.y += 50;\n    });\n  }\n\n  // Populate the sourceLinks and targetLinks for each node.\n  // Also, if the source and target are not objects, assume they are indices.\n  function computeNodeLinks() {\n    nodes.forEach(function (node) {\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    });\n    links.forEach(function (link) {\n      var source = link.source,\n        target = link.target;\n      if (typeof source === 'number') source = link.source = nodes[link.source];\n      if (typeof target === 'number') target = link.target = nodes[link.target];\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    });\n  }\n\n  // Iteratively assign the breadth (y-position) for each node.\n  // Nodes are assigned the maximum breadth of incoming neighbors plus one;\n  // nodes with no incoming links are assigned breadth zero, while\n  // nodes with no outgoing links are assigned the maximum breadth.\n  function computeNodeBreadths() {\n    let remainingNodes = nodes;\n    let nextNodes;\n\n    while (remainingNodes.length) {\n      nextNodes = [];\n      remainingNodes.forEach(function (node) {\n        node.y = (node.round - 1) * roundHeight;\n        node.dy = nodeHeight;\n        node.sourceLinks.forEach(function (link) {\n          nextNodes.push(link.target);\n        });\n      });\n      remainingNodes = nextNodes;\n    }\n  }\n\n  function computeNodeDepths(iterations) {\n    const nodesNest = nodes.reduce((o, n) => {\n      const key = Math.floor(n.y);\n      o[key] = [...(o[key] || []), n];\n      return o;\n    }, {});\n\n    const nodesByBreadth = Object.values(nodesNest);\n    initializeNodeDepth();\n\n    function initializeNodeDepth() {\n      var ky = d3.min(nodesByBreadth, function (nodes) {\n        return (\n          (size[1] - (nodes.length - 1) * nodePadding) / d3.sum(nodes, value)\n        );\n      });\n\n      nodesByBreadth.forEach(function (nodes) {\n        nodes.forEach(function (node, i) {\n          node.x = i * nodeWidth + (i === 0 ? 0 : nodePadding);\n\n          node.dx = nodeWidth;\n        });\n      });\n    }\n  }\n\n  function computeLinkDepths() {\n    nodes.forEach(function (node) {\n      node.sourceLinks.sort(ascendingTargetDepth);\n      node.targetLinks.sort(ascendingSourceDepth);\n    });\n    nodes.forEach(function (node) {\n      let sx = 0;\n      let tx = 0;\n\n      let dxSource = nodeWidth / (node.sourceLinks.length + 1);\n      let dxTarget = nodeWidth / (node.targetLinks.length + 1);\n\n      node.sourceLinks.forEach(function (link) {\n        sx += dxSource;\n        link.sx = sx;\n      });\n      node.targetLinks.forEach(function (link) {\n        tx += dxTarget;\n        link.tx = tx;\n      });\n    });\n\n    function ascendingSourceDepth(a, b) {\n      return a.source.y - b.source.y;\n    }\n\n    function ascendingTargetDepth(a, b) {\n      return a.target.y - b.target.y;\n    }\n  }\n\n  function value(link) {\n    return link.value;\n  }\n\n  return sankey;\n};\n\nexport default Sankey;\n","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\n\nimport chart from './chart';\nimport d3Sankey from './sankey';\n\ninterface Props {\n  config: any;\n}\n\nconst TimelineChart: React.FC<Props> = ({ config }) => {\n  useEffect(() => {\n    const sankey = d3Sankey()\n      .nodeWidth(250)\n      .nodeHeight(30)\n      .nodePadding(50)\n      .size([800, 1800]);\n\n    let path = sankey.link();\n\n    const { nodes, links }: { nodes: any[], links: any[] } = config;\n\n    sankey.nodes(nodes).links(links).layout(50);\n\n    console.log('nodes', nodes);\n    console.log('links', links);\n\n    const svg = chart.createSVG();\n\n    let link = chart.addLinks(svg, links, path);\n\n    let node = chart.addNodes(svg, nodes);\n\n    chart.addRect(node);\n    chart.addNodeText(node);\n  }, [config]);\n  if (config.nodes.length < 1) return null;\n\n  return (\n    <TimelineChartStyled>\n      <SVGContainer id=\"my_dataviz\" />\n    </TimelineChartStyled>\n  );\n};\n\nconst TimelineChartStyled = styled.div``;\n\nconst SVGContainer = styled.div`\n  .link {\n    fill: none;\n    /* stroke: #ff8438; */\n    stroke-opacity: 0.3;\n  }\n`;\n\nexport default TimelineChart;\n","import styled from 'styled-components';\n\nimport logo from './logo.svg';\nimport './App.css';\nimport TimelineChart from './TimelineChart';\n\nlet config = {\n  nodes: [\n    { name: '1Story I / 1通常', round: 1 }, // 0\n    { name: '1Story I / 2Happy Valentine', round: 1 }, // 1\n\n    { name: '2Story II / 1通常', round: 2 }, // 2\n    { name: '2Story II / 2チョコ集め', round: 2 },\n\n    { name: '3Story III / 1通常', round: 3 }, // 4\n    { name: '3Story III / 2ドレスアップ', round: 3 }, // 5\n\n    { name: '4Story IV / 1通常', round: 4 }, // 6\n    { name: '5Real Event / 1PARTY I', round: 5 }, // 7\n    { name: '5Real Event / 2PARTY II', round: 6 },\n    { name: '5Real Event / 3PARTY III', round: 7 }, // 9\n    { name: '6總和 / 1個人', round: 8 },\n    { name: '5Real Event / 4Valentine Party', round: 9 }, // 11\n    { name: '5Real Event / 5ショコラチャレンジ', round: 9 }, // 12\n  ],\n  links: [\n    { source: 0, target: 2, mechanism: 'lockBonus' },\n    { source: 0, target: 4, mechanism: 'lockBonus' },\n    { source: 2, target: 4, mechanism: 'lockBonus' },\n    { source: 6, target: 7, mechanism: 'lockBonus' },\n    { source: 6, target: 7, mechanism: 'inheritance' },\n    { source: 7, target: 8, mechanism: 'lockBonus' },\n    { source: 7, target: 10, mechanism: 'lockBonus' },\n    { source: 8, target: 9, mechanism: 'lockBonus' },\n    { source: 8, target: 10, mechanism: 'lockBonus' },\n    { source: 9, target: 10, mechanism: 'lockBonus' },\n    { source: 10, target: 11, mechanism: 'lockBonus' },\n  ],\n  times: [\n    {\n      label: '2021/01/29 00:00:00',\n    },\n    {\n      label: '2021/02/05 00:00:00',\n    },\n    {\n      label: '2021/02/12 00:00:00',\n    },\n    {\n      label: '2021/02/14 12:00:00 ',\n    },\n    {\n      label: '2021/02/14 19:15:00',\n    },\n    {\n      label: '2021/02/14 19:45:00',\n    },\n    {\n      label: '2021/02/14 20:15:00 ',\n    },\n    {\n      label: '2021/02/14 20:20:00',\n    },\n    {\n      label: '2021/02/14 20:50:00',\n    },\n  ],\n};\n\nfunction App() {\n  return (\n    <DiagramStyled>\n      <Times>\n        {config.times.map((t, i) => {\n          return (\n            <RoundEndTime key={t.label} index={i}>\n              <Day>{t.label.split(' ')[0]}</Day>\n              <Time>{t.label.split(' ')[1]}</Time>\n            </RoundEndTime>\n          );\n        })}\n      </Times>\n      <Chart>\n        <TimelineChart config={config} />\n      </Chart>\n    </DiagramStyled>\n  );\n}\n\nconst DiagramStyled = styled.div`\n  display: flex;\n  padding: 20px 20px;\n  background-color: #222324;\n`;\n\nconst Times = styled.div`\n  width: 200px;\n  color: #c9c9ce;\n`;\n\nconst RoundEndTime = styled.div`\n  height: 30px;\n  border-bottom: 2px dashed #8a8a8a;\n  display: flex;\n  align-items: center;\n  transform: ${(p) => `translate(0, ${70 * p.index}px)`};\n`;\n\nconst Day = styled.span``;\n\nconst Time = styled.span`\n  color: #77bafc;\n  margin-left: 10px;\n`;\n\nconst Chart = styled.div``;\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}